<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Assignment 2</title>
        <link rel="shortcut icon" type="image/png" href="/data/favicon.png"/>
        <!--<link rel="shortcut icon" type="image/png" href="http://example.com/favicon.png"/> -->
        <script type="text/javascript" src="/d3/d3.js"></script>
        <script type="text/javascript" src="/d3/d3-scale-chromatic.v1.min.js"></script>
        <style type=text/css>
          .boro_label{
            text-anchor: middle;
            font-size: 16pt;
            font-weight: bold;
            fill: black;
            /*text-shadow:
              -1px -1px 0 #fff,
              1px -1px 0 #fff,
              -1px 1px 0 #fff,
              1px 1px 0 #fff;*/
            pointer-events: none;
          }
        </style>
    </head>
<body>
<div class="nyc_viz">
<script type="text/javascript">
            ///////////////////
            /// MAP OF NYC ///
            //////////////////

//Defining margins and svg element
var margin = {top: 100, right: 20, bottom: 200, left: 20};
var w = 750 - margin.left - margin.right;
var h = 600 - margin.top - margin.bottom;
var svg = d3.select("body")
      .append("svg")
      .attr("width", (w + margin.left + margin.right))
      .attr("height", (h + margin.top + margin.bottom))
      .append("g")
      .attr("transform", "translate("+margin.left+","+margin.top+")");

//Defining path generator

var projection = d3.geoMercator()
                   .center([-73.93,40.74])
                   .scale(60000)
                   .translate([w/2,h/2]);

var path = d3.geoPath()
             .projection(projection);

//Loading GeoJSON file of boroughs
var geo = [];
d3.json("/data/boroughs.json", function(data)
{
  geo = data; //debugging

  var map = svg.selectAll("path")
               .data(data.features)
               .enter()
               .append("path")
               .attr("class",function(d,i)
                {
                  return "boro_path "+ data.features[i].properties.BoroName;
                })
               .attr("d",path)
               .style("fill","rgb(85,143,110)")
               .style("stroke","rgb(66,66,66)")
               .style("stroke-width","1.5px");
  //Text label for boroughs
  svg.selectAll("text")
     .data(data.features)
     .enter()
     .append("text")
     .attr("class","boro_label")
     .attr("x", function(d)
      {
        return path.centroid(d)[0];
      })
      .attr("y", function(d)
      {
        return path.centroid(d)[1];
      })
      .text(function(d)
      {
        return d.properties.BoroName;
      })

  // Mouse over and out functions
  d3.selectAll('.boro_path')
    .on('mouseover', boro_hover);
  d3.selectAll('.boro_path')
    .on('mouseout', boro_hover_over);

  function boro_hover()
  {
    var hover_object = d3.select(this);

    hover_object.style("stroke", "rgb(50,50,50)")
                .style("stroke-width", "3px");
  }
  function boro_hover_over()
  {
    var hover_object = d3.select(this);

    hover_object.style("stroke", "rgb(66,66,66)")
                .style("stroke-width", "1.5px");
  }
})
</script>
</div>
</body>
</html>
